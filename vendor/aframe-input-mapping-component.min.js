!function(e){function n(t){if(r[t])return r[t].exports;var i=r[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.inputMappings={},AFRAME.registerSystem("input-mapping",{schema:{},mappings:{},mappingsPerControllers:{},currentMapping:"default",_handlers:{},multiple:!1,init:function(){var e=this;this.keyboardHandler=this.keyboardHandler.bind(this),this.sceneEl.addEventListener("inputmappingregistered",function(){}),this.sceneEl.addEventListener("controllerconnected",function(n){function r(e){for(var n in e){var r=e[n];p[n]||(p[n]={}),p[n][t]=r}}if(!AFRAME.inputMappings)return void console.warn("controller-mapping: No mappings defined");for(var t in AFRAME.inputMappings){var i=AFRAME.inputMappings[t],a=n.detail.name;e.mappingsPerControllers[a]||(e.mappingsPerControllers[a]={});var p=e.mappingsPerControllers[a],s=i.common;s&&r(s);var o=i[a];o?r(o):console.warn("controller-mapping: No mappings defined for controller type: ",a)}e.removeControllersListeners();for(var l in p){var d=a+"->"+l;if(!e._handlers[d]){var g=function(r){var t=p[r.type],i=t[e.currentMapping]?t[e.currentMapping]:t.default;i&&n.detail.target.emit(i,r.detail)};n.detail.target.addEventListener(l,g),e._handlers[d]=g}}}),document.addEventListener("keyup",this.keyboardHandler),document.addEventListener("keydown",this.keyboardHandler),document.addEventListener("keypress",this.keyboardHandler)},getActiveMapping:function(){return this.currentMapping},setActiveMapping:function(e){AFRAME.inputMappings[e]?this.currentMapping=e:console.warn("aframe-input-mapping-component: Trying to activate a mapping that doesn't exist:",e)},keyboardHandler:function(e){var n=AFRAME.inputMappings[this.currentMapping];if(n&&n.keyboard){n=n.keyboard;var r=32===e.keyCode?"space":e.key,t=n[r+"_"+e.type.substr(3)];t&&this.sceneEl.emit(t)}},removeControllersListeners:function(){for(var e in this.mappingsPerControllers){var n=this.mappingsPerControllers[e];for(var r in n){var t=e+"->"+r;this.sceneEl.removeEventListener(r,this._handlers[t])}}this._handlers={},this.mappingsPerControllers={}}}),AFRAME.registerInputMappings=function(e,n){if(n||0===Object.keys(AFRAME.inputMappings).length)AFRAME.inputMappings=e;else for(var r in e){var t=e[r];if(AFRAME.inputMappings[r])for(var i in t){var a=t[i];if(AFRAME.inputMappings[r][i])for(var p in a)AFRAME.inputMappings[r][i][p]=a[p];else AFRAME.inputMappings[r][i]=a}else AFRAME.inputMappings[r]=t}for(var s=0;s<AFRAME.scenes.length;s++)AFRAME.scenes[s].emit("inputmappingregistered")},AFRAME.DEFAULT_INPUT_MAPPINGS&&AFRAME.registerInputMappings(AFRAME.DEFAULT_INPUT_MAPPINGS)}]);